---
sidebar_position: 2
---

# 数据结构与类型

## 对象 (Object)

表示以键值对 **（key: value）`** 形式出现的数据

有以下特性：

- 使用“**冒号+空格**”来分开**键**与**值**
  ```YAML
  # YAML
  key: value
  ```

  ```JSON
  // JSON
  "key": "value"
  ```

- 支持多层嵌套（**用缩进表示层级关系**）
  ```YAML
  # YAML
  key:
    child-key1: value1
    child-key2: value2
  ```

  ```JSON
  // JSON
  "key": {
    "child-key1": "value1",
    "child-key2": "value2",
  }
  ```
- 支持 **流式风格（ Flow style）** 的语法（用花括号包裹，用逗号加空格分隔，类似 JSON）
  ```YAML
  # YAML
  key: { child-key1: value1, child-key2: value2 }
  ```

  ```JSON
  // JSON
  "key": { "child-key1": "value1", "child-key2": "value2" }
  ```

- 使用 **问号“?”** 声明一个复杂对象，允许你使用多个词汇（数组）来组成键
  ```YAML
  # YAML
  ?
    - keypart1
    - keypart2
  :
    - value1
    - value2

## 数组（Sequence）

- 一组以 **区块格式（Block Format）（即“破折号+空格”）** 开头的数据组成一个数组
  ```YAML
  # YAML
  values:
    - value1
    - value2
    - value3
  ```
  
  ```JSON
  // JSON
  "values": [ "value1", "value2", "value3" ]
  ```

- 同时也支持 **内联格式（Inline Format）** 来表达（用方括号包裹，逗号加空格分隔，类似 JSON）
  ```YAML
  # YAML
  values: [value1, value2, value3]
  ```
  
  ```JSON
  // JSON
  "values": [ "value1", "value2", "value3" ]
  ```

- 支持多维数组 **（用缩进表示层级关系）**
  ```YAML
  # YAML
  values:
    -
      - value1
      - value2
    -
      - value3
      - value4
  ```

  ```JSON
  // JSON
  "values": [ [ "value1", "value2"], ["value3", "value4"] ]
  ```

## 字符串（String）

- 字符串**一般不需要用引号包裹**，但是如果字符串中**使用了反斜杠“\”开头的转义字符就必须使用引号包裹**
  ```YAML
  # YAML
  strings:
    - Hello without quote # 不用引号包裹
    - Hello
     world # 拆成多行后会自动在中间添加空格
    - 'Hello with single quotes' # 单引号包裹
    - "Hello with double quotes" # 双引号包裹
    - "I am fine. \u263A" # 使用双引号包裹时支持 Unicode 编码
    - "\x0d\x0a is \r\n" # 使用双引号包裹时还支持 Hex 编码
    - 'He said: "Hello!"' # 单双引号支持嵌套"
  ```

  ```JSON
  // JSON
  "strings":
    [ "Hello without quote",
      "Hello world",
      "Hello with single quotes",
      "Hello with double quotes",
      "I am fine. ☺",
      "\r\n is \r\n",
      "He said: 'Hello!'" ]
  ```

- 对于多行的文字，YAML 提供了两种特殊的语法支持

## 布尔值（Boolean）

- “true”、“True”、“TRUE”、“yes”、“Yes”和“YES”皆为**真**
- “false”、“False”、“FALSE”、“no”、“No”和“NO”皆为**假**

```YAML
# YAML
boolean:
  - true # True、TRUE
  - yes # Yes、YES
  - false # False、FALSE
  - no # No、NO
```

```JSON
// JSON
"boolean": [ true, true, false, false ]
```

## 整数（Integer）

> 支持二进制表示

```YAML
# YAML
int:
  - 666
  - 0001_0000 # 二进制表示
```

```JSON
// JSON
"int": [ 666, 4096 ]
```

## 浮点数（Floating Point）

> 支持科学计数法

```YAML
# YAML
float:
  - 3.14
  - 6.8523015e+5 # 使用科学计数法
```

```JSON
// JSON
"float": [ 3.14, 685230.15 ]
```

## 空（Null）

> “null”、“Null”和“~”都是空，不指定值默认也是空

```YAML
# YAML
nulls:
  - null
  - Null
  - ~
  -
```

```JSON
// JSON
"nulls": [ null, null, null, null ]
```
## 时间戳（Timestamp）

> YAML 也支持 ISO 8601 格式的时间数据
> 这里使用 JavaScript 对象进行对比

```YAML
# YAML
date1: 2020-05-26
date2: 2020-05-26T01:00:00+08:00
dete3: 2020-05-26T02:00:00.10+08:00
date4: 2020-05-26 03:00:00.10 +8
```

```JS
// JavaScript
date1: Tue May 26 2020 08:00:00 GMT+0800 (中国标准时间),
date2: Tue May 26 2020 01:00:00 GMT+0800 (中国标准时间),
dete3: Tue May 26 2020 02:00:00 GMT+0800 (中国标准时间),
date4: Tue May 26 2020 03:00:00 GMT+0800 (中国标准时间)
```

## 标量（Scalars）

> 表示 YAML 中最基本的数据类型

包括：
- 字符串
- 布尔值
- 整数
- 浮点数
- Null
- 时间
- 日期

例子
```
boolean:
    - TRUE  #true,True都可以
    - FALSE  #false，False都可以
float:
    - 3.14
    - 6.8523015e+5  #可以使用科学计数法
int:
    - 123
    - 0b1010_0111_0100_1010_1110    #二进制表示
null:
    nodeName: 'node'
    parent: ~  #使用~表示null
string:
    - 哈哈
    - 'Hello world'  #可以使用双引号或者单引号包裹特殊字符
    - newline
      newline2    #字符串可以拆成多行，每一行会被转化成一个空格
date:
    - 2018-02-17    #日期必须使用ISO 8601格式，即yyyy-MM-dd
datetime:
    -  2018-02-17T15:02:31+08:00    #时间使用ISO 8601格式，时间和日期之间使用T连接，最后使用+代表时区
```

## 缩进
书写的时候要尤其注意缩进

如
```
options:
  enable: true
  check: false
  drop-block: true
  other:
    money: 10
    welcome: "欢迎你"
guide:
  show: true
  receive: "你好"
```

我们称 `options` 和 `guide` 在同一缩进下

`enable` 和 `check` 在同一缩进下,同样的,`enable`和`drop-block`也在同一缩进下,以此类推

而 `options.enable` (指options缩进下的enable键)和 `options.other.money` 以及 `guide.show` 则不在同一缩进下

在同一缩进下不允许出现相同的键 如

```
options:
  enable: true
  enable: false
  check: false
```

如果你的文本编辑器支持YAML语法,那么它应该会标红提示你语法错误,这样的配置插件读取也会报错

不在同一缩进下则可以出现相同的键 如

```
options:
  enable: true
  check: false
guide:
  enable: true
  check: true
```

# 实战

一个相对复杂的例子：
```
companies:
    - id: 1
      name: company1
      price: 200W
    - id: 2
      name: company2
      price: 500W
```
意思是 companies 属性是一个数组，每一个数组元素又是由 id、name、price 三个属性构成

## 复合结构

数组和对象可以构成复合结构，例：

```yaml
languages:
  - Ruby
  - Perl
  - Python
websites:
  YAML: yaml.org
  Ruby: ruby-lang.org
  Python: python.org
  Perl: use.perl.org
```

转换为json为：
```json
{
  languages: [ 'Ruby', 'Perl', 'Python'],
  websites: {
    YAML: 'yaml.org',
    Ruby: 'ruby-lang.org',
    Python: 'python.org',
    Perl: 'use.perl.org'
  }
}
```